% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_prep_rubin_normal.R
\name{prepare_summary_data_rubin}
\alias{prepare_summary_data_rubin}
\title{Prepare summary-level data for the rubin_normal model}
\usage{
prepare_summary_data_rubin(
  df,
  tau_hat_col = "tau_j_hat",
  se2_col = "se2_hat",
  covariates = NULL
)
}
\arguments{
\item{df}{A data frame with summary-level data, typically including
\code{tau_j_hat} (or your chosen column name) and \code{se2_hat}.}

\item{tau_hat_col}{Character: the column name in \code{df} for the site-level
observed effect estimates (defaults to \code{"tau_j_hat"}).}

\item{se2_col}{Character: the column name in \code{df} for squared standard errors
(defaults to \code{"se2_hat"}).}

\item{covariates}{Character vector of covariate column names (or \code{NULL} if none).}
}
\value{
A named list with components:
\itemize{
\item \code{J}: number of sites
\item \code{tau_hat_j}: numeric vector of site-level effect estimates
(extracted from \code{df[[tau_hat_col]]})
\item \code{se_j}: numeric vector of standard errors (\code{sqrt(df[[se2_col]])})
\item \code{Nc}: number of covariates
\item \code{X}: matrix of covariates (or a zero-column matrix if \code{covariates=NULL})
}
}
\description{
This function expects columns for:
\itemize{
\item Observed site-level effects: \code{tau_hat_col} (default \code{"tau_j_hat"}).
\item Squared standard errors: \code{se2_col} (default \code{"se2_hat"}).
\item Optional covariates (\code{covariates}).
}
}
\details{
If your data has actual SEs (not squared), you can either rename them to \code{"se2_hat"}
and square them externally, or just store them in the \code{se2_col} while setting
the right name. This function will do \code{sqrt(...)} on whatever \code{se2_col} is,
so be sure it truly represents \emph{squared} errors if you follow these defaults.
}
\examples{
# Example data frame might have columns: tau_j_hat, se2_hat, X1, X2, ...
df_with_cov <- data.frame(
  tau_j_hat = c(0.36, 0.317, 0.765),
  se2_hat   = c(0.167, 0.154, 0.222),
  X1        = c(0,1,1),
  X2        = c(0,1,0)
)
prep <- prepare_summary_data_rubin(
  df          = df_with_cov,
  tau_hat_col = "tau_j_hat",
  se2_col     = "se2_hat",
  covariates  = c("X1","X2")
)
str(prep)

}
